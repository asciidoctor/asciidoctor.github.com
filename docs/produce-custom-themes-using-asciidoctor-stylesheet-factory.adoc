= Produce Custom Themes Using the Asciidoctor Stylesheet Factory
Dan Allen; Sarah White
:page-layout: docs
ifndef::env-site[]
:toc: left
endif::[]
:icons: font
:source-highlighter: coderay
:imagesdir: ../images
:factory-ref: https://github.com/asciidoctor/asciidoctor-stylesheet-factory
:showcase-ref: http://themes.asciidoctor.org/preview/
:compass-ref: http://compass-style.org
:sass-ref: https://sass-lang.com
:uri-foundation: https://foundation.zurb.com
:get-ruby-ref: https://www.ruby-lang.org/en/downloads
:bundler-ref: https://rubygems.org/gems/bundler
:url-docs: https://docs.asciidoctor.org/
:url-docs-asciidoctor: {url-docs}asciidoctor/latest/
:url-docs-asciidoc: {url-docs}asciidoc/latest/
:url-quickref: {url-docs-asciidoc}syntax-quick-reference/
:discuss-ref: https://discuss.asciidoctor.org/

The {factory-ref}[Asciidoctor stylesheet factory] is where themes are developed for styling your documents.
Specifically, these stylesheets can be used to quickly customize the look and feel of HTML 5 documents generated by Asciidoctor.

To view the Asciidoctor themes in action, visit the {showcase-ref}[theme showcase].

WARNING: The Asciidoctor stylesheet factory is currently only compatible with Asciidoctor 0.1.2 and greater.

== Setting up the factory

The stylesheets in the Asciidoctor stylesheet factory are built using {compass-ref}[Compass], a CSS authoring framework that uses {sass-ref}[Sass] to generate CSS files.
The styles and components are generated by {uri-foundation}[Foundation 4], an awesome and flexible CSS component framework that ensures your stylesheet is cross-browser and mobile friendly.

=== Install the gems

In order to build the stylesheets, you must download the Asciidoctor stylesheet factory repository and install the Compass and Foundation gems.

. Download or clone the {factory-ref}[Asciidoctor stylesheet factory repository].
+
NOTE: It does not matter where you save the project on your system.
. Make sure you have {get-ruby-ref}[Ruby and RubyGems] installed, and, ideally, {bundler-ref}[Bundler].
. Run Bundler to install the Compass and Foundation gems.

 $ bundle install

+
[TIP]
--
The previous `bundle` command is equivalent to the following two commands:

 $ gem install compass --version 0.12.2
 $ gem install zurb-foundation --version 4.3.2

You don't need to execute these `gem install` commands if you use Bundler.
--

Once you have the gems installed, you can build the stylesheets.

=== Build the stylesheets

To build the stylesheets:

. Navigate to the Asciidoctor stylesheet factory directory on your system.
. Run Compass's `compile` command.

 $ compass compile

The stylesheets are compiled from the Sass source files in the [.path]_sass/_ folder and written to the [.path]_stylesheets/_ folder.
You can reference the stylesheets in [.path]_stylesheets/_ from your HTML file.

== Applying a stylesheet to HTML

Let's practice applying a stylesheet to a simple AsciiDoc file.
If you're unfamiliar with the general commands needed to convert and style a document created with the AsciiDoc syntax, you may want to review the {convert-ref}[How Do I Convert My Document?] guide before proceeding.

. Create an AsciiDoc file like the one below.
. Save the file as [.path]_mysample.adoc_.

// end

[source, asciidoc]
----
= Introduction to AsciiDoc
Doc Writer <doc@example.com>

A preface about http://asciidoc.org[AsciiDoc].

== First Section

* item 1
* item 2

[source,ruby]
puts "Hello, World!"
----

Next, you'll use the Asciidoctor processor to generate HTML and apply a stylesheet to it from the [.path]_stylesheets/_ directory.

=== Generate an HTML document

Now it's time to pick the stylesheet you want to apply to your content when it is rendered in the browser.
In your file navigator, navigate to the [.path]_stylesheets/_ directory.
Or, using a console, change to the [.path]_stylesheets/_ directory and list the available stylesheets using the `ls` command.

 $ ls

.Console output of `ls` command
....
asciidoctor.css  foundation-lime.css    iconic.css       riak.css
colony.css       foundation-potion.css  maker.css        rubygems.css
foundation.css   golo.css               readthedocs.css
....

Let's apply the [.path]_colony.css_ stylesheet to the sample document.

. Navigate to the directory where you saved [.path]_mysample.adoc_.
. Call the `asciidoctor` processor.
. Specify the stylesheet you want applied with the `stylesheet` attribute.
. Tell the processor where the specified stylesheet is located with the `stylesdir` attribute.

 $ asciidoctor -a stylesheet=colony.css -a stylesdir=../stylesheets mysample.adoc

Open a browser, navigate to [.path]_mysample.html_ and checkout the result!

If you prefer to link the [.path]_colony.css_ stylesheet to the generated HTML output, set the `linkcss` attribute when you convert the document.

 $ asciidoctor -a linkcss -a stylesheet=colony.css -a stylesdir=../stylesheets mysample.adoc

If you inspect the [.path]_mysample.html_ document, you should see that the stylesheet is linked to the converted document.

 <link rel="stylesheet" href="../stylesheets/colony.css">

.Stylesheet images
****
The Golo, Maker, and Riak themes include image assets.
To apply these themes to your document correctly, the applicable images must be copied into the same directory as the generated output.

For example, to apply the [.path]_maker.css_ stylesheet to [.path]_mysample.adoc_:

. Copy [.path]_body-bh.png_ from the [.path]_images/maker/_ directory into the output directory.
. Call the `stylesheet` and `styledir` attributes.

 $ asciidoctor -a stylesheet=maker.css -a stylesdir=../stylesheets mysample.adoc

Navigate to [.path]_mysample.html_ in your browser.
The [.path]_body-bh.png_ image should add a graph paper-like background to your generated output.
****

=== External preview

You may want to preview sample HTML files on another computer or device.
To do that, you need to serve them through a web server.
You can quickly serve HTML files in the root directory of the project using the following command:

.Using Python
 $ python -m SimpleHTTPServer 4242

or

.Using Ruby >= 1.9.3
 $ ruby -run -e httpd . -p 4242

== Create a custom theme

You can create your own themes to apply to your documents.

Themes go in the [.path]_sass/_ folder.
To create a new theme, let's call it `hipster`, start by creating two new files:

[.path]_sass/hipster.scss_::
  * Imports the theme settings, which includes default variables and resets
  * Imports the AsciiDoc components
  * Defines any explicit customization

[.path]_sass/settings/_hipster.scss_::
  * Sets variables that customize Foundation 4 and the AsciiDoc CSS components

Here's a minimal version of [.path]_sass/hipster.scss_:

[source,scss]
----
@import "settings/hipster";
@import "components/asciidoc";
@import "components/awesome-icons";
----

NOTE: You don't have to include the underscore prefix when importing files.

NOTE: The `awesome-icons` component is only applicable to HTML generated by Asciidoctor > 0.1.2 with the `icons` attribute set to `font`.

You can add any explicit customization below the import lines.

The variables you can set in [.path]_sass/settings/_hipster.scss_ are a combination of the {factory-ref}/blob/master/sass/settings/_settings.scss.dist[Foundation 4 built-in global settings] and {factory-ref}/blob/master/sass/settings/_defaults.scss[global settings and imports for the AsciiDoc components].

Once you've created your custom theme, it's time to apply it to your document.

== Apply a custom theme

A custom stylesheet can be stored in the same directory as your document or in a separate directory.
Like the default stylesheet, you can have the output document link to your custom stylesheet or embed it.

If the stylesheet is in the same directory as your document, you can apply it when converting your document to HTML from the CLI.

 $ asciidoctor -a stylesheet=mystyles.css mysample.adoc

. Save your custom stylesheet in the same directory as `mysample.adoc`
. Call the `asciidoctor` processor
. Set `-a` (`--attribute`) and `stylesheet`
. Assign the stylesheet file's name to the `stylesheet` attribute
. Enter your document file's name.

Alternatively, let's set the `stylesheet` attribute in the header of `mysample.adoc`.

----
= My First Experience with the Dangers of Documentation
:stylesheet: mystyles.css

In my world, we don't have to worry about mutant, script-injecting warlocks.
No.
We have something far worse.
We're plagued by Wolpertingers.

== Origins

You may not be familiar with these https://en.wikipedia.org/wiki/Wolpertinger[ravenous beasts], but, trust me, they'll eat your shorts and suck the loops from your code.
----

====
image::mysample-stylesheet.png[]
====

When your document and the stylesheet are stored in different directories, you need to tell Asciidoctor where to look for the stylesheet in relation to your document.
Asciidoctor uses the relative or absolute path you assign to the `stylesdir` attribute to find the stylesheet.
Let's move `mystyles.css` into `mydocuments/mystylesheets/`.
Our AsciiDoc document, `mysample.adoc`, is saved in the `mydocuments/` directory.

----
= My First Experience with the Dangers of Documentation
:stylesdir: mystylesheets/
:stylesheet: mystyles.css

In my world, we don't have to worry about mutant, script-injecting warlocks.
No.
We have something far worse.
We're plagued by Wolpertingers.

== Origins

You may not be familiar with these https://en.wikipedia.org/wiki/Wolpertinger[ravenous beasts], but, trust me, they'll eat your shorts and suck the loops from your code.
----

After processing `mysample.adoc`, its HTML output (`mysample.html`), which includes the embedded `mystyles.css` stylesheet, is created in the `mydocuments/` directory.

====
image::mysample-stylesdir-dir.png[]
====

You can also set `stylesdir` in the CLI.

 $ asciidoctor -a stylesdir=mystylesheets/ -a stylesheet=mystyles.css mysample.adoc

If you don't want to embed the `mystyles.css` stylesheet into your HTML output, make sure to set `linkcss`.

----
= My First Experience with the Dangers of Documentation
:stylesdir: mystylesheets/
:stylesheet: mystyles.css
:linkcss:

In my world, we don't have to worry about mutant, script-injecting warlocks.
No.
We have something far worse.
We're plagued by Wolpertingers.

== Origins

You may not be familiar with these https://en.wikipedia.org/wiki/Wolpertinger[ravenous beasts], but, trust me, they'll eat your shorts and suck the loops from your code.
----

After your document is converted, notice that a copy of `mystyles.css` was not created in the `mydocuments/` directory.
Unlike when you link to the default Asciidoctor stylesheet, any custom stylesheets you link to are not copied to the directory where your output is saved.

[#style-nest-doc]
.Stylesheets and processing multiple nested documents
****
When you are <<user-manual.adoc#process-multiple-source-files-from-the-cli,running Asciidoctor once across a nested set of documents>>, it's currently not possible to specify a single relative path for the `stylesdir` attribute that would work for all of the documents.
This is because the relative depth of the stylesheet's location differs for the documents in the subdirectories.
One way to solve this problem is to maintain the path to `stylesdir` in each document.

Let's say you have three AsciiDoc documents saved in the following directory structure:

----
/mydocuments
  a.adoc
  b.adoc
  /mynesteddocuments
    c.adoc
  /mystylesheets
----

For `a.adoc` and `b.adoc`, set `stylesdir` to:

----
:stylesdir: mystylesheets
----

For `c.adoc`, set `stylesdir` to:

----
:stylesdir: ../mystylesheets
----

If you're serving your documents from a webserver, you can solve this problem by providing an absolute path to the stylesheet.
****

Happy theming!

== Specify CSS class or id

An important feature to learn when customizing a CSS is that the desired CSS `class` or `id` can be specified on AsciiDoc elements via 
a {user-ref}/#role[Role] or {user-ref}/#id[ID].

NOTE: It is not necessary to use a stylesheet factory to leverage Roles or IDs and specify CSS `class` or `id` on Asciidoc elements.

== Additional themes for Asciidoctor

The https://github.com/darshandsoni/asciidoctor-skins[asciidoctor-skins] repository has additional stylesheets that can be used to theme your AsciiDoc-based documentation.
These stylesheets are specifically created for users who want to style their documents without having to dive into writing custom CSS.
The stylesheets in asciidoctor-skins import the default stylesheet first, then overlay an alternate theme (in other words, a "`skin`").

== Resources and help

Now that you have applied a custom theme to your AsciiDoc document, you may want to learn more about the AsciiDoc syntax and the growing variety of integrations, backends, and customizations the Asciidoctor project is developing.

Need an overview of the AsciiDoc syntax?

* {url-quickref}[AsciiDoc Syntax Quick Reference]

Want to dive deep into all of Asciidoctor's features?

* {url-docs-asciidoctor}[Asciidoctor documentation]

Also, don't forget to join the {discuss-ref}[Asciidoctor mailing list], where you can ask questions and leave comments.
