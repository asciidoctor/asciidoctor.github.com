= Create and Build Custom Themes with the Asciidoctor Stylesheet Factory
Dan Allen; Sarah White
:awestruct-layout: base
:toc:
:factoryrepo: http://github.com/asciidoctor/asciidoctor-stylesheet-factory
:factoryshowcase: http://themes.asciidoctor.org/
:doc-ref: link:/docs
:toolchain-ref: {doc-ref}/install-toolchain
:render-ref: {doc-ref}/render-documents
:compass: http://compass-style.org
:sass: http://sass-lang.com
:foundation: http://foundation.zurb.com
:bundler: http://rubygems.org/gems/bundler
:factoryissue: http://github.com/asciidoctor/asciidoctor-stylesheet-factory/issues
:mailinglist: http://discuss.asciidoctor.org/

The {factoryrepo}[Asciidoctor Stylesheet Factory project] is where themes for AsciiDoc-produced HTML are developed.
These stylesheets can be used to quickly customize the HTML generated by the Asciidoctor processor, in this case, specifically the +html5+ backend.

To view the Asciidoctor themes in action, visit the {factoryshowcase}[theme showcase].

WARNING: The Asciidoctor Stylesheet Factory is currently only compatible with {toolchain-ref}[Asciidoctor 0.1.2].

== Setting up the Factory

The stylesheets in the Asciidoctor Stylesheet Factory are built using {compass}[Compass], a CSS authoring framework that uses {sass}[Sass] to generate CSS files.
The styles and components are generated by {foundation}[Foundation 4], an awesome and flexible CSS component framework that ensures your stylesheet is cross-browser and mobile friendly.

=== Install the gems

In order to build the stylesheets, you must download the Asciidoctor Stylesheet Factory repository and install the Compass and Foundation gems.

. Download or clone the {factoryrepo}[Asciidoctor Stylesheet Factory repository].
It does not matter where you save the project on your system.
. Make sure you have Ruby, RubyGems and, optionally, {bundler}[Bundler] installed.
. Run Bundler to install the Compass and Foundation gems.

// end
 $ bundle install

The above command is equivalent to executing:

 $ gem install --version '0.12.2' compass
 $ gem install --version '4.0.9' zurb-foundation

Once you have the gems installed, you can build the stylesheets.

=== Build the stylesheets

To build the stylesheets:

. Navigate to the Asciidoctor Stylesheet Factory directory on your system. 
. Run Compass's +compile+ command.

// end
 $ compass compile

The stylesheets are compiled from the Sass source files in the +sass/+ folder and written to the +stylesheets/+ folder.
You can then reference the stylesheets in +stylesheets/+ from your HTML file.

== Applying a stylesheet to HTML

Let's practice applying a stylesheet to a simple AsciiDoc file.
If you're unfamiliar with the general commands needed to render and style a document created with the AsciiDoc syntax, you may want to review the {render-ref}[How Do I Render My Document guide] before proceeding. 

. Create an AsciiDoc file like the one below.
. Save the file as +sample.adoc+.

// end

----
 = Introduction to AsciiDoc
 Doc Writer <doc@example.com>

 A preface about http://asciidoc.org[AsciiDoc].

 == First Section

 * item 1
 * item 2

 [source,ruby]
 puts "Hello, World!"
----

Next, you'll use the Asciidoctor processor to generate HTML and apply a stylesheet to it from the +stylesheets/+ directory.

=== Generate an HTML document

Now it's time to pick the stylesheet you want to apply to your content when it is rendered.
In your file browser, navigate to the +stylesheets/+ directory.
Or, using a console, change to the +stylesheets/+ directory and list the available stylesheets using the +ls+ command.

 $ ls
 asciidoctor.css  colony.css  foundation.css  foundation-lime.css  foundation-potion.css  golo.css  iconic.css  maker.css
 readthedocs.css  riak.css  rubygems.css

Let's apply the +colony.css+ stylesheet to the sample document.

. Navigate to the directory where you saved +sample.adoc+.
. Call the +asciidoctor+ processor.
. Specify the stylesheet you want applied with the +stylesheet+ attribute.
. Tell the processor where the specified stylesheet is located with the +stylesdir+ attribute.

// end

 $ asciidoctor -a stylesheet=colony.css -a stylesdir=../stylesheets sample.adoc

Open a browser, navigate to +sample.html+ and checkout the result!

If you inspect the +sample.html+ document, you should see that the stylesheet is linked to the rendered document.

 <link rel="stylesheet" href="../stylesheets/colony.css">

If you prefer to embed the +colony.css+ stylesheet into the generated HTML output, unset the +linkcss+ attribute when you render the document.

 $ asciidoctor -a linkcss! -a stylesheet=colony.css -a stylesdir=../stylesheets sample.adoc

IMPORTANT: Unlike in AsciiDoc, Asciidoctor sets +linkcss+ by default.
We believe linking to the stylesheet is more manageable, and it is the accepted practice on the web.

.Stylesheet images
****

The Golo, Maker, and Riak themes include image assets.
To apply these themes to your document correctly, the applicable images must be copied into the same directory as the generated output.

For example, to apply the +maker.css+ stylesheet to +sample.adoc+:

. Copy +body-bh.png+ from the +images/maker/+ directory into the output directory.
. Call the +stylesheet+ and +styledir+ attributes.

// end

 $ asciidoctor -a stylesheet=maker.css -a stylesdir=../stylesheets sample.adoc
 
Navigate to +sample.html+ in your browser. The +body-bh.png+ image should add a graph paper-like background to your generated output.
 
****

=== External preview

You may want to preview sample HTML files on another computer or device.
To do that, you need to serve them through a web server.
You can quickly serve HTML files in the root directory of the project using the following command:

 python -m SimpleHTTPServer 4242

== Create a custom theme

Themes go in the +sass/+ folder.
To create a new theme, let's call it +hipster+, start by creating two new files:

+sass/hipster.scss+::
  * Imports the theme settings, which includes default variables and resets
  * Imports the AsciiDoc components
  * Defines any explicit customizations
+sass/settings/_hipster.scss+::
  * Sets variables that customize Foundation 4 and the AsciiDoc CSS components

Here's a minimal version of +sass/hipster.scss+:

[source, scss]
----
@import "settings/hipster";
@import "components/asciidoc";
@import "components/awesome-icons";
----

NOTE: You don't have to include the underscore prefix when importing files.

NOTE: The +awesome-icons+ component is only applicable to HTML generated by Asciidoctor >= 0.1.2 with the +icons+ attribute set to +awesome+.

You can add any explicit customizations below the import lines.

The variables you can set in +sass/settings/_hipster.scss+ are a combination of the {factoryrepo}/blob/master/sass/settings/_settings.scss.dist[Foundation 4 built-in global settings] and {factoryrepo}/blob/master/sass/settings/_defaults.scss[global settings and imports for the AsciiDoc components].

Happy theming!

== Resources and Help

Also, don't forget to join the {mailinglist}[Asciidoctor mailing list], where you can ask questions and leave comments.

To file an issue regarding an Asciidoctor Factory stylesheet, visit the {factoryissue}[project's repository].


